# æµ‹è¯•è„šæœ¬éªŒè¯ç¤ºä¾‹

## ğŸ“‹ ç¤ºä¾‹ï¼šæ‰‹æœºå·ç™»å½•æµ‹è¯•è„šæœ¬éªŒè¯è¯´æ˜

### æ–‡ä»¶ï¼š`tests/login/test_login_phone.py`

#### ğŸ¯ éªŒè¯ç›®çš„
æ‰‹æœºå·ç™»å½•åŠŸèƒ½æµ‹è¯•ï¼ŒéªŒè¯ç”¨æˆ·é€šè¿‡æ‰‹æœºå·å’ŒéªŒè¯ç è¿›è¡Œç™»å½•çš„åŠŸèƒ½ã€‚

#### ğŸ”— APIç›®æ ‡
- **ç«¯ç‚¹ï¼š** `/auth/login/phone`
- **æ–¹æ³•ï¼š** POST
- **åŸºç¡€URLï¼š** `https://staging.orderwithinfi.com/kiosk-shopping-api`

#### âœ… éªŒè¯ç‚¹

| éªŒè¯é¡¹ | ç¤ºä¾‹ä»£ç  | é¢„æœŸç»“æœ |
|--------|----------|----------|
| çŠ¶æ€ç æ˜¯å¦ä¸º200ï¼ˆæˆåŠŸç™»å½•ï¼‰ | `assert response.status_code == 200` | æˆåŠŸç™»å½•è¿”å›200çŠ¶æ€ç  |
| å“åº”ä¸­æ˜¯å¦åŒ…å«tokenå­—æ®µ | `assert 'token' in response.json()` | å“åº”åŒ…å«æœ‰æ•ˆçš„è®¤è¯token |
| æ— æ•ˆéªŒè¯ç å¤„ç† | `assert response.status_code in [401, 404]` | æ— æ•ˆéªŒè¯ç è¿”å›401æˆ–404 |
| æ— æ•ˆæ‰‹æœºå·å¤„ç† | `assert response.status_code in [401, 404]` | æ— æ•ˆæ‰‹æœºå·è¿”å›401æˆ–404 |
| ç¼ºå°‘éªŒè¯ç å‚æ•°å¤„ç† | `assert response.status_code in [400, 404]` | ç¼ºå°‘å‚æ•°è¿”å›400æˆ–404 |
| ç¼ºå°‘æ‰‹æœºå·å‚æ•°å¤„ç† | `assert response.status_code in [400, 404]` | ç¼ºå°‘å‚æ•°è¿”å›400æˆ–404 |

#### ğŸ§ª æµ‹è¯•åœºæ™¯

1. **æ­£å¸¸ç™»å½•æµç¨‹**
   ```python
   payload = {
       "phone": "1234567890",
       "verificationCode": "123456"
   }
   ```

2. **é”™è¯¯éªŒè¯ç å¤„ç†**
   ```python
   payload = {
       "phone": "1234567890",
       "verificationCode": "000000"
   }
   ```

3. **å‚æ•°ç¼ºå¤±å¤„ç†**
   ```python
   payload = {
       "phone": "1234567890"
       # ç¼ºå°‘ verificationCode
   }
   ```

4. **å¤šç”¨æˆ·å¹¶å‘æµ‹è¯•**
   ```python
   @pytest.mark.parametrize("phone,code", [
       ("1234567890", "123456"),
       ("9876543210", "654321"),
       ("5555555555", "111111")
   ])
   ```

#### ğŸ“Š æµ‹è¯•ç»Ÿè®¡
- **æµ‹è¯•ç”¨ä¾‹æ•°ï¼š** 8ä¸ª
- **å‚æ•°åŒ–æµ‹è¯•ï¼š** 3ç»„æ•°æ®
- **é”™è¯¯åœºæ™¯ï¼š** 4ä¸ª
- **æˆåŠŸåœºæ™¯ï¼š** 4ä¸ª

#### ğŸ”§ æŠ€æœ¯å®ç°
- ä½¿ç”¨ `@pytest.mark.skip_if_api_unavailable` è£…é¥°å™¨
- é›†æˆ `is_api_available()` æ£€æŸ¥
- æ”¯æŒ404ç«¯ç‚¹å¤„ç†ï¼ˆAPIä¸å¯ç”¨æ—¶çš„ä¼˜é›…é™çº§ï¼‰
- ç»Ÿä¸€çš„è¯·æ±‚æ–¹æ³•å’Œé”™è¯¯å¤„ç†

#### ğŸ“ ç»´æŠ¤è¯´æ˜
1. å½“APIç«¯ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–°URL
2. å½“éªŒè¯é€»è¾‘å˜åŒ–æ—¶ï¼Œæ›´æ–°æ–­è¨€æ¡ä»¶
3. å½“æ–°å¢æµ‹è¯•åœºæ™¯æ—¶ï¼Œæ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹
4. å®šæœŸæ£€æŸ¥æµ‹è¯•æ•°æ®çš„æœ‰æ•ˆæ€§

---

## ğŸ“‹ ç¤ºä¾‹ï¼šéªŒè¯ç å‘é€æµ‹è¯•è„šæœ¬éªŒè¯è¯´æ˜

### æ–‡ä»¶ï¼š`tests/verification/test_send_code.py`

#### ğŸ¯ éªŒè¯ç›®çš„
éªŒè¯ç å‘é€åŠŸèƒ½æµ‹è¯•ï¼ŒéªŒè¯ç³»ç»Ÿå‘é‚®ç®±å’Œæ‰‹æœºå·å‘é€éªŒè¯ç çš„åŠŸèƒ½ã€‚

#### ğŸ”— APIç›®æ ‡
- **é‚®ç®±éªŒè¯ç ï¼š** `/auth/send-code/email`
- **æ‰‹æœºéªŒè¯ç ï¼š** `/auth/send-code/phone`
- **æ–¹æ³•ï¼š** POST

#### âœ… éªŒè¯ç‚¹

| éªŒè¯é¡¹ | ç¤ºä¾‹ä»£ç  | é¢„æœŸç»“æœ |
|--------|----------|----------|
| é‚®ç®±éªŒè¯ç å‘é€æˆåŠŸ | `assert response.status_code in [200, 201, 404]` | å‘é€æˆåŠŸè¿”å›200/201 |
| æ‰‹æœºéªŒè¯ç å‘é€æˆåŠŸ | `assert response.status_code in [200, 201, 404]` | å‘é€æˆåŠŸè¿”å›200/201 |
| æ— æ•ˆé‚®ç®±æ ¼å¼å¤„ç† | `assert response.status_code in [400, 404]` | æ— æ•ˆæ ¼å¼è¿”å›400 |
| æ— æ•ˆæ‰‹æœºå·æ ¼å¼å¤„ç† | `assert response.status_code in [400, 404]` | æ— æ•ˆæ ¼å¼è¿”å›400 |
| ç¼ºå°‘é‚®ç®±å‚æ•°å¤„ç† | `assert response.status_code in [400, 404]` | ç¼ºå°‘å‚æ•°è¿”å›400 |
| ç¼ºå°‘æ‰‹æœºå·å‚æ•°å¤„ç† | `assert response.status_code in [400, 404]` | ç¼ºå°‘å‚æ•°è¿”å›400 |

#### ğŸ§ª æµ‹è¯•åœºæ™¯

1. **é‚®ç®±éªŒè¯ç å‘é€**
   ```python
   payload = {
       "email": "test@example.com"
   }
   ```

2. **æ‰‹æœºéªŒè¯ç å‘é€**
   ```python
   payload = {
       "phone": "1234567890"
   }
   ```

3. **æ ¼å¼éªŒè¯**
   ```python
   payload = {
       "email": "invalid-email"  # æ— æ•ˆé‚®ç®±æ ¼å¼
   }
   ```

4. **æ‰¹é‡å‘é€æµ‹è¯•**
   ```python
   @pytest.mark.parametrize("email", [
       "test001@example.com",
       "test002@example.com",
       "test003@example.com"
   ])
   ```

#### ğŸ“Š æµ‹è¯•ç»Ÿè®¡
- **æµ‹è¯•ç”¨ä¾‹æ•°ï¼š** 12ä¸ª
- **å‚æ•°åŒ–æµ‹è¯•ï¼š** 6ç»„æ•°æ®
- **é”™è¯¯åœºæ™¯ï¼š** 4ä¸ª
- **æˆåŠŸåœºæ™¯ï¼š** 8ä¸ª

---

## ğŸ“‹ ç¤ºä¾‹ï¼šä½ç½®ä¿¡æ¯è·å–æµ‹è¯•è„šæœ¬éªŒè¯è¯´æ˜

### æ–‡ä»¶ï¼š`tests/location/test_get_location.py`

#### ğŸ¯ éªŒè¯ç›®çš„
ä½ç½®ä¿¡æ¯è·å–åŠŸèƒ½æµ‹è¯•ï¼ŒéªŒè¯ç³»ç»Ÿè·å–ä½ç½®åŸºæœ¬ä¿¡æ¯å’Œè®¾ç½®çš„åŠŸèƒ½ã€‚

#### ğŸ”— APIç›®æ ‡
- **ä½ç½®ä¿¡æ¯ï¼š** `/v1/location/info`
- **ä½ç½®è®¾ç½®ï¼š** `/v1/location/settings`
- **æ–¹æ³•ï¼š** GET

#### âœ… éªŒè¯ç‚¹

| éªŒè¯é¡¹ | ç¤ºä¾‹ä»£ç  | é¢„æœŸç»“æœ |
|--------|----------|----------|
| è·å–ä½ç½®åŸºæœ¬ä¿¡æ¯ | `assert response.status_code in [200, 404]` | æˆåŠŸè·å–è¿”å›200 |
| å¸¦å‚æ•°è·å–ä½ç½®ä¿¡æ¯ | `assert response.status_code in [200, 404]` | æˆåŠŸè·å–è¿”å›200 |
| è·å–ä½ç½®è®¾ç½® | `assert response.status_code in [200, 404]` | æˆåŠŸè·å–è¿”å›200 |
| å¤šä¸ªä½ç½®IDæµ‹è¯• | `assert response.status_code in [200, 404]` | æˆåŠŸè·å–è¿”å›200 |
| 404ç«¯ç‚¹å¤„ç† | ä¼˜é›…å¤„ç†404å“åº” | ä¸æŠ›å‡ºå¼‚å¸¸ |

#### ğŸ§ª æµ‹è¯•åœºæ™¯

1. **åŸºæœ¬ä½ç½®ä¿¡æ¯è·å–**
   ```python
   url = f"{BASE_URL}/v1/location/info"
   ```

2. **å¸¦å‚æ•°çš„ä½ç½®ä¿¡æ¯è·å–**
   ```python
   params = {
       "location-id": "5382410a-d2d7-4271-a29c-385a38ebbca9"
   }
   ```

3. **ä½ç½®è®¾ç½®è·å–**
   ```python
   url = f"{BASE_URL}/v1/location/settings"
   ```

4. **å¤šä½ç½®æµ‹è¯•**
   ```python
   @pytest.mark.parametrize("location_id", [
       "5382410a-d2d7-4271-a29c-385a38ebbca9",
       "test-location-1",
       "test-location-2"
   ])
   ```

#### ğŸ“Š æµ‹è¯•ç»Ÿè®¡
- **æµ‹è¯•ç”¨ä¾‹æ•°ï¼š** 6ä¸ª
- **å‚æ•°åŒ–æµ‹è¯•ï¼š** 3ç»„æ•°æ®
- **é”™è¯¯åœºæ™¯ï¼š** 3ä¸ª
- **æˆåŠŸåœºæ™¯ï¼š** 3ä¸ª

---

## ğŸ“‹ å¦‚ä½•ä¸ºå…¶ä»–æµ‹è¯•è„šæœ¬æ·»åŠ éªŒè¯è¯´æ˜

### 1. åˆ›å»ºéªŒè¯è¯´æ˜æ¨¡æ¿

```markdown
### æ–‡ä»¶ï¼š`tests/æ¨¡å—å/test_æ–‡ä»¶å.py`

#### ğŸ¯ éªŒè¯ç›®çš„
[æè¿°æµ‹è¯•è„šæœ¬çš„ä¸»è¦éªŒè¯ç›®çš„]

#### ğŸ”— APIç›®æ ‡
- **ç«¯ç‚¹ï¼š** `/api/endpoint`
- **æ–¹æ³•ï¼š** [GET/POST/PUT/DELETE]
- **åŸºç¡€URLï¼š** [åŸºç¡€URL]

#### âœ… éªŒè¯ç‚¹

| éªŒè¯é¡¹ | ç¤ºä¾‹ä»£ç  | é¢„æœŸç»“æœ |
|--------|----------|----------|
| [éªŒè¯é¡¹1] | `assert response.status_code == 200` | [é¢„æœŸç»“æœ] |
| [éªŒè¯é¡¹2] | `assert 'field' in response.json()` | [é¢„æœŸç»“æœ] |

#### ğŸ§ª æµ‹è¯•åœºæ™¯

1. **[åœºæ™¯1]**
   ```python
   [ä»£ç ç¤ºä¾‹]
   ```

2. **[åœºæ™¯2]**
   ```python
   [ä»£ç ç¤ºä¾‹]
   ```

#### ğŸ“Š æµ‹è¯•ç»Ÿè®¡
- **æµ‹è¯•ç”¨ä¾‹æ•°ï¼š** [æ•°é‡]
- **å‚æ•°åŒ–æµ‹è¯•ï¼š** [æ•°é‡]
- **é”™è¯¯åœºæ™¯ï¼š** [æ•°é‡]
- **æˆåŠŸåœºæ™¯ï¼š** [æ•°é‡]
```

### 2. æ›´æ–°æ–‡æ¡£

å°†éªŒè¯è¯´æ˜æ·»åŠ åˆ°ç›¸åº”çš„æ–‡æ¡£æ–‡ä»¶ä¸­ï¼š
- `TEST_VALIDATION_GUIDE.md` - è¯¦ç»†è¯´æ˜
- `TEST_SCRIPTS_VALIDATION_LIST.md` - ç®€æ´æ¸…å•

### 3. ç»´æŠ¤æ–‡æ¡£

å®šæœŸæ›´æ–°æ–‡æ¡£ä»¥åæ˜ ï¼š
- APIç«¯ç‚¹çš„å˜åŒ–
- éªŒè¯é€»è¾‘çš„æ›´æ–°
- æ–°å¢çš„æµ‹è¯•åœºæ™¯
- æµ‹è¯•ç»Ÿè®¡çš„å˜åŒ–

---

*ç¤ºä¾‹æ–‡æ¡£ç‰ˆæœ¬ï¼š1.0*  
*æœ€åæ›´æ–°ï¼š2024å¹´7æœˆ29æ—¥* 